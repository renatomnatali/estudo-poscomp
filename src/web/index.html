<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POSCOMP Visual Lab - Aplicação V1</title>
  <link rel="stylesheet" href="/css/tokens.css">
  <link rel="stylesheet" href="/css/app.css">
</head>
<body>
<a class="skip-link" href="#conteudo">Pular para conteúdo</a>
<div class="page-wrap" id="conteudo">
  <header class="hub-header">
    <div class="brand">
      <div class="brand-mark">PC</div>
      <span>POSCOMP Visual Lab</span>
    </div>
    <h1 class="hub-title">Aplicação V1 - Autômatos</h1>
    <p class="hub-subtitle">
      Estudo interativo com simulação de AFD, minimização, conversão AFN→AFD e questões estilo POSCOMP.
    </p>
    <div class="toolbar" style="margin-top: 16px;">
      <button class="button secondary" type="button" data-view-btn="afd">Simulador AFD</button>
      <button class="button secondary" type="button" data-view-btn="min">Minimização</button>
      <button class="button secondary" type="button" data-view-btn="conv">AFN→AFD</button>
      <button class="button secondary" type="button" data-view-btn="qa">Questões</button>
    </div>
  </header>

  <section class="section-card" data-view="afd">
    <h2 class="section-title">Simulador AFD</h2>
    <div class="expression-grid">
      <div>
        <label for="afd-machine">Expressão da máquina</label>
        <textarea id="afd-machine" data-afd-machine-input></textarea>
      </div>
      <div>
        <label for="afd-language">Expressão da linguagem</label>
        <input id="afd-language" type="text" data-afd-language-input>

        <label for="afd-word" style="margin-top: 12px;">Palavra de entrada</label>
        <input id="afd-word" type="text" data-afd-word-input value="ababc">
      </div>
    </div>

    <div class="symbol-pad" aria-label="Teclado de símbolos">
      <button class="symbol-btn" type="button" data-afd-symbol="a">a</button>
      <button class="symbol-btn" type="button" data-afd-symbol="b">b</button>
      <button class="symbol-btn" type="button" data-afd-symbol="c">c</button>
      <button class="symbol-btn" type="button" data-afd-symbol=",">,</button>
      <button class="symbol-btn" type="button" data-afd-symbol="*">*</button>
      <button class="symbol-btn" type="button" data-afd-symbol="=">=</button>
      <button class="symbol-btn" type="button" data-afd-symbol="{">{</button>
      <button class="symbol-btn" type="button" data-afd-symbol="}">}</button>
      <button class="symbol-btn" type="button" data-afd-symbol="δ">δ</button>
      <button class="symbol-btn" type="button" data-afd-symbol="Σ">Σ</button>
      <button class="symbol-btn" type="button" data-afd-symbol="→">→</button>
    </div>

    <div class="demo-grid" style="margin-top: 16px;">
      <button type="button" class="demo-card is-active" data-afd-demo="demo-c">
        <strong>Demo termina com c</strong>
        <p>L = {a,b}*{c}</p>
      </button>
      <button type="button" class="demo-card" data-afd-demo="demo-b">
        <strong>Demo termina com b</strong>
        <p>L = {a,c}*{b}</p>
      </button>
      <button type="button" class="demo-card" data-afd-demo="demo-a">
        <strong>Demo termina com a</strong>
        <p>L = {b,c}*{a}</p>
      </button>
    </div>

    <div class="toolbar">
      <button class="button primary" type="button" data-afd-run>Executar automático</button>
      <button class="button secondary" type="button" data-afd-step>Próximo passo</button>
      <button class="button secondary" type="button" data-afd-reset>Reset</button>
      <button class="button secondary" type="button" data-afd-cancel>Cancelar</button>
    </div>

    <div class="sim-meta">
      <article class="sim-box"><div class="sim-box-label">Estado atual</div><p class="sim-box-value" data-afd-current-state>e1</p></article>
      <article class="sim-box"><div class="sim-box-label">Posição</div><p class="sim-box-value" data-afd-current-pos>0/0</p></article>
      <article class="sim-box"><div class="sim-box-label">Resultado</div><p class="sim-box-value" data-afd-result>—</p></article>
      <article class="sim-box"><div class="sim-box-label">Status</div><p class="sim-box-value" style="display:flex;gap:8px;align-items:center;"><span class="status-dot queued" data-afd-status-dot></span><span data-afd-status-text>queued</span></p></article>
    </div>

    <div class="tape" data-afd-tape></div>

    <div class="delta-table-wrap">
      <table class="delta-table">
        <thead>
          <tr><th>δ</th><th>a</th><th>b</th><th>c</th></tr>
        </thead>
        <tbody>
          <tr><td class="state-cell">e1</td><td data-afd-cell="e1-a">e1</td><td data-afd-cell="e1-b">e1</td><td data-afd-cell="e1-c">e2</td></tr>
          <tr><td class="state-cell">e2</td><td data-afd-cell="e2-a">e3</td><td data-afd-cell="e2-b">e3</td><td data-afd-cell="e2-c">e3</td></tr>
          <tr><td class="state-cell">e3</td><td data-afd-cell="e3-a">e3</td><td data-afd-cell="e3-b">e3</td><td data-afd-cell="e3-c">e3</td></tr>
        </tbody>
      </table>
    </div>

    <div class="run-log" data-afd-log></div>
  </section>

  <section class="section-card" data-view="min" hidden>
    <h2 class="section-title">Minimização de AFD</h2>
    <label for="min-input">AFD em JSON</label>
    <textarea id="min-input" data-min-input style="min-height: 180px;"></textarea>
    <div class="toolbar">
      <button class="button secondary" type="button" data-min-demo="v1">Demo V1</button>
      <button class="button secondary" type="button" data-min-demo="paridade">Demo paridade</button>
      <button class="button primary" type="button" data-min-run>Minimizar</button>
      <button class="button secondary" type="button" data-min-step>Próxima partição</button>
      <button class="button secondary" type="button" data-min-reset>Reset</button>
    </div>

    <div class="sim-meta">
      <article class="sim-box"><div class="sim-box-label">Status</div><p class="sim-box-value" style="display:flex;gap:8px;align-items:center;"><span class="status-dot queued" data-min-status-dot></span><span data-min-status-text>queued</span></p></article>
      <article class="sim-box"><div class="sim-box-label">Estados antes</div><p class="sim-box-value" data-min-before>—</p></article>
      <article class="sim-box"><div class="sim-box-label">Estados depois</div><p class="sim-box-value" data-min-after>—</p></article>
      <article class="sim-box"><div class="sim-box-label">Mesclas</div><p class="sim-box-value" data-min-merged>—</p></article>
    </div>

    <div class="grid cols-2">
      <article class="panel">
        <h3>AFD original</h3>
        <div class="delta-table-wrap"><table class="delta-table" data-min-original><thead><tr></tr></thead><tbody></tbody></table></div>
      </article>
      <article class="panel">
        <h3>AFD minimizado</h3>
        <div class="delta-table-wrap"><table class="delta-table" data-min-minimized><thead><tr></tr></thead><tbody></tbody></table></div>
      </article>
    </div>

    <h3>Partições</h3>
    <div class="partition-track" data-min-partitions></div>

    <h3>Equivalência por palavra</h3>
    <div class="delta-table-wrap">
      <table class="delta-table"><thead><tr><th>Palavra</th><th>Original</th><th>Minimizado</th><th>Status</th></tr></thead><tbody data-min-equivalence></tbody></table>
    </div>

    <div class="run-log" data-min-log></div>
  </section>

  <section class="section-card" data-view="conv" hidden>
    <h2 class="section-title">Conversão AFN→AFD</h2>
    <label for="conv-input">AFN em JSON</label>
    <textarea id="conv-input" data-conv-input style="min-height: 180px;"></textarea>
    <div class="toolbar">
      <button class="button secondary" type="button" data-conv-demo="a-b">Demo a*b</button>
      <button class="button secondary" type="button" data-conv-demo="termina-ab">Demo termina com ab</button>
      <button class="button primary" type="button" data-conv-run>Converter</button>
      <button class="button secondary" type="button" data-conv-reset>Reset</button>
    </div>

    <div class="sim-meta">
      <article class="sim-box"><div class="sim-box-label">Status</div><p class="sim-box-value" style="display:flex;gap:8px;align-items:center;"><span class="status-dot queued" data-conv-status-dot></span><span data-conv-status-text>queued</span></p></article>
      <article class="sim-box"><div class="sim-box-label">Inicial AFD</div><p class="sim-box-value" data-conv-initial>—</p></article>
      <article class="sim-box"><div class="sim-box-label">Finais AFD</div><p class="sim-box-value" data-conv-finals>—</p></article>
    </div>

    <div class="grid cols-2">
      <article class="panel">
        <h3>Tabela AFN</h3>
        <div class="delta-table-wrap"><table class="delta-table" data-conv-nfa><thead><tr></tr></thead><tbody></tbody></table></div>
        <h4 style="margin-top: 14px;">ε-fechos</h4>
        <div class="partition-track" data-conv-closures></div>
      </article>
      <article class="panel">
        <h3>Tabela AFD</h3>
        <div class="delta-table-wrap"><table class="delta-table" data-conv-dfa><thead><tr></tr></thead><tbody></tbody></table></div>
        <h4 style="margin-top: 14px;">Subconjunto → estado</h4>
        <div class="subset-map" data-conv-subsets></div>
      </article>
    </div>

    <div class="toolbar">
      <button class="button secondary" type="button" data-conv-word="ab">Testar ab</button>
      <button class="button secondary" type="button" data-conv-word="aab">Testar aab</button>
      <button class="button secondary" type="button" data-conv-word="bbb">Testar bbb</button>
    </div>

    <div class="delta-table-wrap">
      <table class="delta-table"><thead><tr><th>Palavra</th><th>AFN</th><th>AFD</th><th>Status</th></tr></thead><tbody data-conv-results></tbody></table>
    </div>

    <div class="run-log" data-conv-log></div>
  </section>

  <section class="section-card" data-view="qa" hidden>
    <h2 class="section-title">Questões estilo POSCOMP</h2>
    <div class="control-row">
      <div>
        <label for="qa-year">Ano</label>
        <select id="qa-year" data-qa-year>
          <option value="all">Todos</option>
          <option value="2025">2025</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
          <option value="2022">2022</option>
        </select>
      </div>
      <div>
        <label for="qa-topic">Subtópico</label>
        <select id="qa-topic" data-qa-topic>
          <option value="all">Todos</option>
          <option value="afd_modelagem_execucao">AFD modelagem e execução</option>
          <option value="minimizacao_afd">Minimização de AFD</option>
          <option value="afn_epsilon">AFN com ε</option>
          <option value="conversao_afn_afd">Conversão AFN→AFD</option>
        </select>
      </div>
      <div>
        <label for="qa-difficulty">Dificuldade</label>
        <select id="qa-difficulty" data-qa-difficulty>
          <option value="all">Todas</option>
          <option value="easy">Fácil</option>
          <option value="medium">Média</option>
          <option value="hard">Difícil</option>
        </select>
      </div>
    </div>

    <div class="grid cols-2" style="margin-top: 12px;">
      <article class="panel">
        <h3>Lista</h3>
        <div class="question-list" data-qa-list></div>
      </article>
      <article class="panel">
        <h3>Questão</h3>
        <div data-qa-detail></div>
      </article>
    </div>

    <div class="grid cols-2">
      <article class="panel">
        <h3>Feedback</h3>
        <div class="callout" data-qa-feedback>Selecione e corrija uma questão.</div>
      </article>
      <article class="panel">
        <h3>Métricas por subtópico</h3>
        <div class="delta-table-wrap">
          <table class="delta-table"><thead><tr><th>Subtópico</th><th>Respondidas</th><th>Acurácia</th><th>Status</th></tr></thead><tbody data-qa-metrics></tbody></table>
        </div>
      </article>
    </div>
  </section>
</div>

<script src="/js/automata-core.js"></script>
<script src="/js/app.js" type="module"></script>
</body>
</html>
